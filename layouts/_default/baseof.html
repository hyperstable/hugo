<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}">
{{ partial "head.html" . }}
<body>
  {{ partial "header.html" . }}
  <main>
    {{ block "main" . }}{{ end }}
  </main>
  {{ partial "footer.html" . }}
  
  <!-- FORCE OUR CUSTOM SCRIPTS -->
  <script>
  console.log('Custom script injected via baseof.html');
  
  // Sidebar dropdown fix
  document.addEventListener('DOMContentLoaded', function() {
      console.log('Fixing sidebar dropdowns...');
      
      const dropdownButtons = document.querySelectorAll('.sidebar-dropdown button.btn');
      console.log('Found buttons:', dropdownButtons.length);
      
      dropdownButtons.forEach(button => {
          button.style.cursor = 'pointer';
          
          button.addEventListener('click', function(e) {
              e.preventDefault();
              const dropdown = this.closest('.sidebar-dropdown');
              const submenu = dropdown.querySelector('.sidebar-submenu');
              
              if (submenu) {
                  // Toggle display
                  if (submenu.style.display === 'block') {
                      submenu.style.display = 'none';
                      dropdown.classList.remove('active');
                  } else {
                      // Close others
                      document.querySelectorAll('.sidebar-submenu').forEach(m => m.style.display = 'none');
                      document.querySelectorAll('.sidebar-dropdown').forEach(d => d.classList.remove('active'));
                      
                      // Open this one
                      submenu.style.display = 'block';
                      dropdown.classList.add('active');
                  }
              }
          });
          
          // Initialize closed
          const submenu = button.closest('.sidebar-dropdown').querySelector('.sidebar-submenu');
          if (submenu) submenu.style.display = 'none';
      });
      
      // Add styles
      const style = document.createElement('style');
      style.textContent = `
          .sidebar-dropdown button.btn::after {
              content: 'â–¼';
              float: right;
              transition: transform 0.3s;
              font-size: 0.8em;
              opacity: 0.5;
          }
          .sidebar-dropdown.active button.btn::after {
              transform: rotate(-180deg);
          }
          .sidebar-dropdown.active button.btn {
              background-color: rgba(0,0,0,0.05);
          }
      `;
      document.head.appendChild(style);
  });
  </script>
</body>
</html>
